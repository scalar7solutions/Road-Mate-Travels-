import{D as _}from"./Datatable-V7WP3OY6.js";import{_ as C}from"./CreateUpdate.vue_vue_type_script_setup_true_lang-GqfntOBw.js";import{d as k,f as D,D as f,r as n,j as N,b as e,a as m,w as S,k as T,o as B}from"./app-CO-Li67X.js";const K={class:"rounded-2xl border border-neutral-200 bg-white p-4 shadow-sm"},$=k({__name:"CategoryList",setup(M){const p=D(()=>f("categories.data")),s=n(0),o=n(!1),l=n("create"),d=n(null),b=[{data:"id",name:"id"},{data:"name",name:"name"},{data:"status_badge",name:"status",orderable:!0,searchable:!0},{data:"actions",name:"actions",orderable:!1,searchable:!1}],v=[{targets:[2,3],render:t=>t}];function h(){l.value="create",d.value=null,o.value=!0}function y(t){l.value="edit",d.value=t,o.value=!0}function g(){o.value=!1}function w(){o.value=!1,s.value=Date.now()}function x(t){const u=t.target.closest("button[data-action]");if(!u)return;t.preventDefault(),t.stopPropagation();const i=u.dataset.action,c=u.dataset.payload;if(!i||!c)return;let a=null;try{a=JSON.parse(c)}catch{a=null}if(a){if(i==="edit"){y(a);return}if(i==="delete"){if(!confirm(`Delete category "${a.name}"? This cannot be undone.`))return;T.delete(f("categories.destroy",a.id),{preserveScroll:!0,onSuccess:()=>{s.value=Date.now()}})}}}return(t,r)=>(B(),N("div",K,[e("div",{class:"flex items-center justify-between mb-4"},[r[0]||(r[0]=e("div",{class:"font-semibold text-neutral-800"},"All Categories",-1)),e("button",{class:"inline-flex items-center rounded-full border border-red-500 px-4 py-2 text-sm font-medium text-red-500 hover:bg-red-500 hover:text-white transition",onClick:h,type:"button"}," + New Category ")]),e("div",{ref:"tableWrap",onClick:x},[m(_,{id:"categoriesTable",url:p.value,columns:b,columnDefs:v,order:[[0,"desc"]],reloadKey:s.value},{header:S(()=>[...r[1]||(r[1]=[e("tr",null,[e("th",{style:{width:"60px"}},"#"),e("th",null,"Name"),e("th",{style:{width:"120px"}},"Status"),e("th",{style:{width:"220px"}},"Actions")],-1)])]),_:1},8,["url","reloadKey"])],512),m(C,{show:o.value,mode:l.value,category:d.value,onClose:g,onSaved:w},null,8,["show","mode","category"])]))}});export{$ as _};
