import{d as C,f as j,r as v,m as U,p as M,c as E,w as x,a as b,b as t,u as o,h as N,t as i,l as h,D as p,e as _,q as D,s as w,j as d,v as f,x as y,o as a}from"./app-CO-Li67X.js";import{_ as S}from"./AppLayout.vue_vue_type_script_setup_true_lang-CccvE53C.js";import"./index-BGSI_5wX.js";import"./useForwardExpose-CPxa4S1q.js";import"./VisuallyHidden-znRxUDds.js";import"./RovingFocusGroup-BF5_n4PG.js";import"./createLucideIcon-DirkTCRQ.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-DmJqIgJy.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Ds9XV8fC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./lock-C1-sIU4x.js";const F={class:"p-6 space-y-4"},H={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},P={class:"text-2xl font-bold"},O={class:"text-sm text-neutral-500"},T={class:"grid grid-cols-1 gap-4"},I={key:0,class:"mt-1 text-sm text-red-600"},L={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},R={class:"rounded-xl border border-neutral-200 overflow-hidden bg-neutral-50 flex items-center justify-center"},W=["src"],q={key:1,class:"h-24 w-44 flex items-center justify-center text-xs text-neutral-400"},z={class:"flex-1 w-full"},A={key:0,class:"mt-1 text-sm text-red-600"},K={key:1,class:"mt-1 text-sm text-red-600"},Y={key:0,class:"mt-2 text-xs text-neutral-500"},$={key:0,class:"mt-1 text-sm text-red-600"},G={class:"mt-6 flex flex-col sm:flex-row gap-2 sm:justify-end"},J=["disabled"],de=C({__name:"CreateUpdate",props:{mode:{},banner:{}},setup(g){const l=g,u=j(()=>l.mode==="edit"&&!!l.banner?.id),c=v(l.banner?.video_url??null),m=v(null),e=U({name:l.banner?.name??"",description:l.banner?.description??"",video:null});M(()=>l.banner?.id,()=>{const s=l.banner;e.clearErrors(),e.name=s?.name??"",e.description=s?.description??"",e.video=null,c.value=s?.video_url??null,m.value=null});function k(s){const r=s.target,n=r.files?.[0]||null;if(m.value=null,e.video=null,!n){c.value=l.banner?.video_url??null;return}if(!n.type.startsWith("video/")){m.value="Only video files are allowed.",r.value="";return}const V=100*1024*1024;if(n.size>V){m.value="Video must be less than 100MB.",r.value="";return}e.video=n,c.value=URL.createObjectURL(n)}function B(){if(e.clearErrors(),!u.value){e.post(p("homebanners.store"),{forceFormData:!0,preserveScroll:!0});return}e.transform(s=>({...s,_method:"PUT"})).post(p("homebanners.update",l.banner.id),{forceFormData:!0,preserveScroll:!0,onFinish:()=>e.transform(s=>s)})}return(s,r)=>(a(),E(S,null,{default:x(()=>[b(o(N),{title:u.value?"Update Home Banner":"Create Home Banner"},null,8,["title"]),t("div",F,[t("div",H,[t("div",null,[t("h1",P,i(u.value?"Update Home Banner":"Create Home Banner"),1),t("p",O,i(u.value?"Edit home banner details.":"Create a new home banner."),1)]),b(o(h),{href:o(p)("homebanners.index"),class:"inline-flex w-full sm:w-auto items-center justify-center rounded-full border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-700 hover:bg-neutral-100 transition"},{default:x(()=>[...r[2]||(r[2]=[_(" Back ",-1)])]),_:1},8,["href"])]),t("form",{onSubmit:D(B,["prevent"]),class:"rounded-2xl border border-neutral-200 bg-white p-4 sm:p-6 shadow-sm"},[t("div",T,[t("div",null,[r[3]||(r[3]=t("label",{class:"block text-sm font-medium text-neutral-700 mb-1"},"Banner Name",-1)),w(t("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>o(e).name=n),type:"text",class:"w-full rounded-xl border border-neutral-200 px-4 py-2 outline-none focus:border-red-500",placeholder:"e.g. New Year Promo"},null,512),[[y,o(e).name]]),o(e).errors.name?(a(),d("p",I,i(o(e).errors.name),1)):f("",!0)]),t("div",null,[r[5]||(r[5]=t("label",{class:"block text-sm font-medium text-neutral-700 mb-1"},"Video",-1)),t("div",L,[t("div",R,[c.value?(a(),d("video",{key:0,src:c.value,controls:"",preload:"metadata",class:"h-24 w-44 bg-black object-cover"},null,8,W)):(a(),d("div",q," No Video "))]),t("div",z,[t("input",{type:"file",accept:"video/*",onChange:k,class:"block w-full text-sm text-neutral-600 file:mr-4 file:rounded-full file:border-0 file:bg-neutral-100 file:px-4 file:py-2 file:text-sm file:font-medium hover:file:bg-neutral-200"},null,32),r[4]||(r[4]=t("p",{class:"text-xs text-neutral-500 mt-1"},"MP4/MOV/WEBM/AVI/MKV — max 100MB.",-1)),m.value?(a(),d("p",A,i(m.value),1)):f("",!0),o(e).errors.video?(a(),d("p",K,i(o(e).errors.video),1)):f("",!0)])]),u.value?(a(),d("p",Y," If you don’t upload a new video, the existing video will remain. ")):f("",!0)]),t("div",null,[r[6]||(r[6]=t("label",{class:"block text-sm font-medium text-neutral-700 mb-1"},"Description",-1)),w(t("textarea",{"onUpdate:modelValue":r[1]||(r[1]=n=>o(e).description=n),rows:"5",class:"w-full rounded-xl border border-neutral-200 px-4 py-2 outline-none focus:border-red-500",placeholder:"Short description about the banner video..."},null,512),[[y,o(e).description]]),o(e).errors.description?(a(),d("p",$,i(o(e).errors.description),1)):f("",!0)])]),t("div",G,[b(o(h),{href:o(p)("homebanners.index"),class:"inline-flex w-full sm:w-auto items-center justify-center rounded-full border border-neutral-200 px-5 py-2 text-sm font-medium text-neutral-700 hover:bg-neutral-100 transition"},{default:x(()=>[...r[7]||(r[7]=[_(" Cancel ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:o(e).processing,class:"inline-flex w-full sm:w-auto items-center justify-center rounded-full bg-red-500 px-6 py-2 text-sm font-medium text-white hover:bg-red-600 disabled:opacity-50"},i(o(e).processing?"Saving...":u.value?"Update":"Create"),9,J)])],32)])]),_:1}))}});export{de as default};
