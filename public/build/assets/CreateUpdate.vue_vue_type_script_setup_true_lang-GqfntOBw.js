import{d as C,r as _,m as S,p as b,j as a,v as m,b as e,t as u,q as v,s as g,x as U,u as o,y as j,D as y,o as n}from"./app-CO-Li67X.js";const F={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center"},B={class:"relative w-full max-w-lg rounded-2xl bg-white p-6 shadow-xl"},D={class:"flex items-start justify-between gap-4 mb-4"},E={class:"text-lg font-semibold text-neutral-900"},N={key:0,class:"mt-1 text-sm text-red-600"},P={class:"flex items-center gap-4"},M={class:"h-16 w-16 rounded-xl border border-neutral-200 overflow-hidden flex items-center justify-center bg-neutral-50"},V=["src"],I={key:1,class:"text-xs text-neutral-400"},A={class:"flex-1"},G={key:0,class:"mt-1 text-sm text-red-600"},L={key:0,class:"mt-1 text-sm text-red-600"},R={class:"flex items-center justify-end gap-2 pt-2"},T=["disabled"],z=C({__name:"CreateUpdate",props:{show:{type:Boolean},mode:{},category:{}},emits:["close","saved"],setup(d,{emit:h}){const l=d,f=h,c=_(null),s=S({name:"",status:"active",image:null});function x(){s.clearErrors(),s.defaults({name:l.category?.name??"",status:l.category?.status??"active",image:null}),s.reset(),c.value=l.category?.image_url??null}b(()=>l.show,i=>{i&&x()}),b(()=>l.category?.id,()=>{l.show&&x()});function w(i){const r=i.target.files?.[0]||null;s.image=r,r&&(c.value=URL.createObjectURL(r))}function p(){f("close")}function k(){if(s.clearErrors(),!(l.mode==="edit"&&l.category?.id)){s.post(y("categories.store"),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>f("saved")});return}s.transform(t=>({...t,_method:"PUT"})).post(y("categories.update",l.category.id),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>f("saved"),onFinish:()=>s.transform(t=>t)})}return(i,t)=>d.show?(n(),a("div",F,[e("div",{class:"absolute inset-0 bg-black/50",onClick:p}),e("div",B,[e("div",D,[e("div",null,[e("h2",E,u(d.mode==="create"?"Create Category":"Update Category"),1),t[3]||(t[3]=e("p",{class:"text-sm text-neutral-500"},"Fill the details below.",-1))]),e("button",{class:"text-neutral-500 hover:text-neutral-900",onClick:p,type:"button"}," âœ• ")]),e("form",{class:"space-y-4",onSubmit:v(k,["prevent"])},[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-neutral-700 mb-1"},"Category Name",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o(s).name=r),type:"text",class:"w-full rounded-xl border border-neutral-200 px-4 py-2 outline-none focus:border-red-500",placeholder:"e.g. Accessories"},null,512),[[U,o(s).name]]),o(s).errors.name?(n(),a("div",N,u(o(s).errors.name),1)):m("",!0)]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-neutral-700 mb-1"},"Category Image",-1)),e("div",P,[e("div",M,[c.value?(n(),a("img",{key:0,src:c.value,class:"h-full w-full object-cover"},null,8,V)):(n(),a("span",I,"No Image"))]),e("div",A,[e("input",{type:"file",accept:"image/*",onChange:w,class:"block w-full text-sm text-neutral-600 file:mr-4 file:rounded-full file:border-0 file:bg-neutral-100 file:px-4 file:py-2 file:text-sm file:font-medium hover:file:bg-neutral-200"},null,32),t[5]||(t[5]=e("p",{class:"text-xs text-neutral-500 mt-1"}," JPG/PNG/WebP, up to 2MB recommended. ",-1)),o(s).errors.image?(n(),a("div",G,u(o(s).errors.image),1)):m("",!0)])])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-neutral-700 mb-1"},"Status",-1)),g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>o(s).status=r),class:"w-full rounded-xl border border-neutral-200 px-4 py-2 outline-none focus:border-red-500"},[...t[7]||(t[7]=[e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)])],512),[[j,o(s).status]]),o(s).errors.status?(n(),a("div",L,u(o(s).errors.status),1)):m("",!0)]),e("div",R,[e("button",{type:"button",class:"rounded-full border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-700 hover:bg-neutral-100",onClick:p}," Cancel "),e("button",{type:"submit",onClick:t[2]||(t[2]=v(()=>{},["stop"])),disabled:o(s).processing,class:"rounded-full bg-red-500 px-5 py-2 text-sm font-medium text-white hover:bg-red-600 disabled:opacity-50"},u(o(s).processing?"Saving...":d.mode==="create"?"Create":"Update"),9,T)])],32)])])):m("",!0)}});export{z as _};
