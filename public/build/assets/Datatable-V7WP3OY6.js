import{j as o,b as a,v as u,Q as p,o as l}from"./app-CO-Li67X.js";import{_ as c}from"./_plugin-vue_export-helper-DlAUqK2U.js";const h={name:"DataTable",props:{id:{type:String,required:!0},url:{type:String,required:!0},columns:{type:Array,required:!0},columnDefs:{type:Array,default:()=>[]},order:{type:Array,default:()=>[]},buttons:{type:Array,default:()=>[]},method:{type:String,default:"GET"},submitData:{type:Object,default:()=>({})},reloadKey:{type:[Number,String,Boolean],default:null},dom:{type:String,default:`
  <'dt-toolbar flex flex-wrap items-center justify-end mb-3'
    <'dt-export flex items-center gap-2 mb-2'B>
  >
  <'dt-controls flex flex-wrap items-center justify-between mb-3'
    <'dt-left flex items-center gap-3'f l>
  >
  <'table-responsive drag't>
  <'dt-footer flex flex-wrap items-center justify-between mt-3' i p>
`},displayLength:{type:Number,default:10},lengthMenu:{type:Array,default:()=>[[10,25,50,100],["10","25","50","100"]]},processing:{type:Boolean,default:!0},serverSide:{type:Boolean,default:!0},responsive:{type:Boolean,default:!0},stateSave:{type:Boolean,default:!1}},data(){return{dt:null,isLoading:!0}},mounted(){this.initDataTable()},beforeUnmount(){this.destroyDataTable()},watch:{submitData:{deep:!0,handler(){this.reloadDatatable()}},url(){this.reloadDatatable()},reloadKey(){this.reloadDatatable()}},methods:{csrfToken(){return this.$page?.props?.csrf_token||document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},initDataTable(){const t=window.jQuery;if(!t||!t.fn?.DataTable){console.error("[DataTable] jQuery/DataTables not found."),this.isLoading=!1;return}const e=`#${this.id}`;this.destroyDataTable();const r={columns:":visible:not(:last-child)"},d=this.buttons.length?this.buttons:[{extend:"excel",className:"dt-btn",text:"Export Excel",exportOptions:r},{extend:"csv",className:"dt-btn",text:"Export CSV",exportOptions:r},{extend:"print",className:"dt-btn",text:"Print Table",exportOptions:r}];this.dt=t(e).DataTable({dom:this.dom,buttons:d,processing:this.processing,serverSide:this.serverSide,responsive:this.responsive,stateSave:this.stateSave,lengthMenu:this.lengthMenu,pageLength:this.displayLength,order:this.order,columnDefs:this.columnDefs,columns:this.columns,language:{search:"",lengthMenu:"_MENU_",zeroRecords:"No records found",paginate:{previous:"‹",next:"›"},processing:`
  <div class="dt-loading-overlay">
    <div class="dt-spinner"></div>
    <div class="dt-loading-text">Loading data...</div>
  </div>
`},ajax:{url:this.url,method:this.method,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":this.csrfToken()},data:s=>{Object.assign(s,this.submitData)}},initComplete:()=>{const s=t(`${e}_filter`),n=s.find("input");s.addClass("mb-0 dt-filter"),n.addClass("dt-search-input").attr("placeholder","Name, email or phone");const i=t('<div class="dt-search-wrapper"></div>');n.appendTo(i),s.empty().append(i),t(`${e}_length select`).addClass("dt-length-select"),this.isLoading=!1}})},destroyDataTable(){if(this.dt){try{this.dt.destroy(!0)}catch{}this.dt=null}},reloadDatatable(){if(!(!window.jQuery||!this.dt))try{this.dt.ajax.reload(null,!1)}catch{this.initDataTable()}},getApi(){return this.dt}}},f={class:"dt-wrapper overflow-hidden"},b={class:"dt-table"},m={key:0,class:"dt-initial-loader"},y={class:""},g=["id"],x={class:"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"};function v(t,e,r,d,s,n){return l(),o("div",f,[a("div",b,[s.isLoading?(l(),o("div",m,[...e[0]||(e[0]=[a("div",{class:"dt-loading-overlay"},[a("div",{class:"dt-spinner"}),a("div",{class:"dt-loading-text"},"Loading data...")],-1)])])):u("",!0),a("div",y,[a("table",{id:r.id,class:"w-full text-sm text-neutral-700 dark:text-neutral-300"},[a("thead",x,[p(t.$slots,"header",{},void 0,!0)]),e[1]||(e[1]=a("tbody",null,null,-1))],8,g)])])])}const T=c(h,[["render",v],["__scopeId","data-v-9de35fb1"]]);export{T as D};
