import{a as O,_ as Y}from"./InputError.vue_vue_type_script_setup_true_lang-C_JuOHnV.js";import{P as T,c as j,q as Z,_ as U}from"./index-BGSI_5wX.js";import{a as ee,c as te,e as ae,g as oe,b as le,d as L}from"./VisuallyHidden-znRxUDds.js";import{f as ne,e as se,k as K}from"./useForwardExpose-CPxa4S1q.js";import{V as re}from"./VisuallyHiddenInput-BCheo5bC.js";import{d as B,P as ue,f as _,r as S,p as Q,c as P,w as p,Q as A,a as h,u as a,R as I,o as x,g as ie,C as de,K as F,n as ce,b as g,h as pe,a9 as G,j as fe,I as me,J as ve,e as H,t as J}from"./app-CO-Li67X.js";import{u as ye}from"./useArrowNavigation-C6Y-ieo6.js";import{_ as ge}from"./AuthLayout.vue_vue_type_script_setup_true_lang-CfWqy7d-.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Ds9XV8fC.js";import"./index-DmJqIgJy.js";const[he,_e]=te("PinInputRoot");var be=B({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(n,{emit:l}){const t=n,s=l,{mask:u,otp:f,placeholder:V,type:r,disabled:m,dir:v}=ue(t),{forwardRef:C}=ne(),b=ee(v),y=se(t,"modelValue",s,{defaultValue:t.defaultValue??[],passive:!0,deep:!0}),E=_(()=>Array.isArray(y.value)?[...y.value]:[]),k=S(new Set);function D(c){k.value.add(c)}const R=_(()=>t.type==="number"),M=_(()=>E.value.filter(q=>!!q||R.value&&q===0).length===k.value.size);return Q(y,()=>{M.value&&s("complete",y.value)},{deep:!0}),_e({modelValue:y,currentModelValue:E,mask:u,otp:f,placeholder:V,type:r,dir:b,disabled:m,isCompleted:M,inputElements:k,onInputElementChange:D,isNumericMode:R}),(c,q)=>(x(),P(a(T),I(c.$attrs,{ref:a(C),dir:a(b),"data-complete":M.value?"":void 0,"data-disabled":a(m)?"":void 0}),{default:p(()=>[A(c.$slots,"default",{modelValue:a(y)}),h(re,{id:c.id,as:"input",feature:"focusable",tabindex:"-1",value:E.value.join(""),name:c.name??"",disabled:a(m),required:c.required,onFocus:q[0]||(q[0]=$=>Array.from(k.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),xe=be,Ve=B({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(n){const l=n,t=he(),s=_(()=>Array.from(t.inputElements.value)),u=_(()=>t.currentModelValue.value[l.index]),f=_(()=>l.disabled||t.disabled.value),V=_(()=>t.otp.value),r=_(()=>t.mask.value),{primitiveElement:m,currentElement:v}=ae();function C(e){const o=e.target;if((e.data?.length??0)>1){c(o.value);return}if(t.isNumericMode.value&&!/^\d*$/.test(o.value)){o.value=o.value.replace(/\D/g,"");return}o.value=e.data||o.value.slice(-1),$(l.index,o.value);const i=s.value[l.index+1];i&&i.focus()}function b(){const e=v.value;ce(()=>{e&&!e.value&&(e.placeholder=t.placeholder.value)})}function y(e){ye(e,oe(),void 0,{itemsArray:s.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:t.dir.value})}function E(e){if(e.preventDefault(),e.target.value)$(l.index,"");else{const w=s.value[l.index-1];w&&(w.focus(),$(l.index-1,""))}}function k(e){e.key==="Delete"&&(e.preventDefault(),$(l.index,""))}function D(e){const o=e.target;o.setSelectionRange(1,1),o.value||(o.placeholder="")}function R(e){b()}function M(e){e.preventDefault();const o=e.clipboardData;if(!o)return;const i=o.getData("text");c(i)}function c(e){const o=[...t.currentModelValue.value],i=e.length>=s.value.length?0:l.index,w=Math.min(i+e.length,s.value.length);for(let N=i;N<w;N++){const X=s.value[N],z=e[N-i];t.isNumericMode.value&&!/^\d*$/.test(z)||(o[N]=z,X.focus())}t.modelValue.value=o,s.value[w]?.focus()}function q(e){let o=e.length-1;for(;o>=0&&e[o]==="";)e.pop(),o--;return e}function $(e,o){const i=[...t.currentModelValue.value];if(t.isNumericMode.value){const w=+o;o===""||isNaN(w)?delete i[e]:i[e]=w}else i[e]=o;t.modelValue.value=q(i)}return Q(u,()=>{u.value||b()}),ie(()=>{t.onInputElementChange(v.value)}),de(()=>{t.inputElements?.value.delete(v.value)}),(e,o)=>(x(),P(a(T),{ref_key:"primitiveElement",ref:m,autocapitalize:"none",as:e.as,"as-child":e.asChild,autocomplete:V.value?"one-time-code":"false",type:r.value?"password":"text",inputmode:a(t).isNumericMode.value?"numeric":"text",pattern:a(t).isNumericMode.value?"[0-9]*":void 0,placeholder:a(t).placeholder.value,value:u.value,disabled:f.value,"data-disabled":f.value?"":void 0,"data-complete":a(t).isCompleted.value?"":void 0,"aria-label":`pin input ${e.index+1} of ${s.value.length}`,onInput:o[0]||(o[0]=i=>C(i)),onKeydown:[F(y,["left","right","up","down","home","end"]),F(E,["backspace"]),F(k,["delete"])],onFocus:D,onBlur:R,onPaste:M},{default:p(()=>[A(e.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),we=Ve;const Pe=B({__name:"PinInput",props:{modelValue:{default:()=>[]},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","complete"],setup(n,{emit:l}){const t=n,s=l,u=K(t,"class"),f=le(u,s);return(V,r)=>(x(),P(a(xe),I({"data-slot":"pin-input"},a(f),{class:a(j)("flex items-center gap-2 has-disabled:opacity-50 disabled:cursor-not-allowed",t.class)}),{default:p(()=>[A(V.$slots,"default")]),_:3},16,["class"]))}}),Ce=B({__name:"PinInputGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const l=n,t=K(l,"class"),s=L(t);return(u,f)=>(x(),P(a(T),I({"data-slot":"pin-input-group"},a(s),{class:a(j)("flex items-center",l.class)}),{default:p(()=>[A(u.$slots,"default")]),_:3},16,["class"]))}}),qe=B({__name:"PinInputSlot",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const l=n,t=K(l,"class"),s=L(t);return(u,f)=>(x(),P(a(we),I({"data-slot":"pin-input-slot"},a(s),{class:a(j)("border-input focus:border-ring focus:ring-ring/50 focus:aria-invalid:ring-destructive/20 dark:bg-input/30 dark:focus:aria-invalid:ring-destructive/40 aria-invalid:border-destructive focus:aria-invalid:border-destructive relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none text-center first:rounded-l-md first:border-l last:rounded-r-md focus:z-10 focus:ring-[3px]",l.class)}),null,16,["class"]))}}),d=n=>({url:d.url(n),method:"post"});d.definition={methods:["post"],url:"/two-factor-challenge"};d.url=n=>d.definition.url+Z(n);d.post=n=>({url:d.url(n),method:"post"});const W=n=>({action:d.url(n),method:"post"});W.post=n=>({action:d.url(n),method:"post"});d.form=W;Object.assign(d,d);const ke={class:"space-y-6"},Ie=["value"],Be={class:"flex flex-col items-center justify-center space-y-3 text-center"},Ee={class:"flex w-full items-center justify-center"},Me={class:"text-center text-sm text-muted-foreground"},$e=["onClick"],Ne={class:"text-center text-sm text-muted-foreground"},Re=["onClick"],Ge=B({__name:"TwoFactorChallenge",setup(n){const l=_(()=>t.value?{title:"Recovery Code",description:"Please confirm access to your account by entering one of your emergency recovery codes.",toggleText:"login using an authentication code"}:{title:"Authentication Code",description:"Enter the authentication code provided by your authenticator application.",toggleText:"login using a recovery code"}),t=S(!1),s=V=>{t.value=!t.value,V(),u.value=[]},u=S([]),f=_(()=>u.value.join(""));return(V,r)=>(x(),P(ge,{title:l.value.title,description:l.value.description},{default:p(()=>[h(a(pe),{title:"Two-Factor Authentication"}),g("div",ke,[t.value?(x(),P(a(G),I({key:1},a(d).form(),{class:"space-y-4","reset-on-error":""}),{default:p(({errors:m,processing:v,clearErrors:C})=>[h(a(Y),{name:"recovery_code",type:"text",placeholder:"Enter recovery code",autofocus:t.value,required:""},null,8,["autofocus"]),h(O,{message:m.recovery_code},null,8,["message"]),h(a(U),{type:"submit",class:"w-full",disabled:v},{default:p(()=>[...r[4]||(r[4]=[H("Continue",-1)])]),_:1},8,["disabled"]),g("div",Ne,[r[5]||(r[5]=g("span",null,"or you can ",-1)),g("button",{type:"button",class:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",onClick:()=>s(C)},J(l.value.toggleText),9,Re)])]),_:1},16)):(x(),P(a(G),I({key:0},a(d).form(),{class:"space-y-4","reset-on-error":"",onError:r[1]||(r[1]=m=>u.value=[])}),{default:p(({errors:m,processing:v,clearErrors:C})=>[g("input",{type:"hidden",name:"code",value:f.value},null,8,Ie),g("div",Be,[g("div",Ee,[h(a(Pe),{id:"otp",placeholder:"â—‹",modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=b=>u.value=b),type:"number",otp:""},{default:p(()=>[h(a(Ce),null,{default:p(()=>[(x(),fe(me,null,ve(6,(b,y)=>h(a(qe),{key:b,index:y,disabled:v,autofocus:""},null,8,["index","disabled"])),64))]),_:2},1024)]),_:2},1032,["modelValue"])]),h(O,{message:m.code},null,8,["message"])]),h(a(U),{type:"submit",class:"w-full",disabled:v},{default:p(()=>[...r[2]||(r[2]=[H("Continue",-1)])]),_:1},8,["disabled"]),g("div",Me,[r[3]||(r[3]=g("span",null,"or you can ",-1)),g("button",{type:"button",class:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",onClick:()=>s(C)},J(l.value.toggleText),9,$e)])]),_:1},16))])]),_:1},8,["title","description"]))}});export{Ge as default};
